<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>swipe</title>
    <link rel="stylesheet" href="http://192.168.110.54:8010/v4.9_api/esri/css/main.css">
    <script src="http://192.168.110.54:8010/v4.9_api/init.js"></script>

    <style>
        html, body, #map1, #map2{padding: 0;margin: 0;height: 100%;width: 100%;}
    </style>
</head>
<body>

<div id='map1' style="position: absolute;top: 0px;left: 0px;">
    <img src="circle.png" id="image_XY" width="250px" ;height="250px" style="position: absolute;"/>
    <div id='map2' style="position: absolute;top: 0px;left: 0px;"></div>
</div>
</body>
<script>
    var map1toplayerdiv
    require([
        "esri/Map",
        "esri/views/MapView",
        "dojo/dom-style",
        "dojo/dom",
        "esri/core/watchUtils",
        "dojo/domReady!Telit_Swipe/Swipe"
    ], function(Map,MapView,domStyle,dom,watchUtils) {
        var map1 = new Map({
            basemap: 'streets'
        })
        var view1 = new MapView({
            map: map1,
            container: 'map1'
        })

        var map2 = new Map({
            basemap: 'satellite'
        })
        var view2= new MapView({
            map: map2,
            container: 'map2'
        })
        view1.ui.remove(["attribution"]);
        view2.ui.remove(["attribution"]);

        map1toplayerdiv=map1toplayerdiv?map1toplayerdiv:dom.byId('map2');
        domStyle.set(map1toplayerdiv,'-webkit-clip-path','circle(100px at 600px 500px)');

        var imageLoc=dom.byId("image_XY");
        domStyle.set(imageLoc,"left", '475px');
        domStyle.set(imageLoc, "top", '375px');

        view1.on('pointer-move',function(e){
            e.stopPropagation();
            map1toplayerdiv=map1toplayerdiv?map1toplayerdiv:dom.byId('map2');
            var  offsetX=e.x;
            var  offsetY=e.y;
            domStyle.set(map1toplayerdiv,'-webkit-clip-path','circle(100px at '+offsetX+'px '+offsetY+'px');
            domStyle.set(imageLoc,"left", (offsetX-125)+'px ');
            domStyle.set(imageLoc, "top", (offsetY-125)+'px ');
        });
        view2.on('pointer-move',function(e){
            e.stopPropagation();
            map1toplayerdiv=map1toplayerdiv?map1toplayerdiv:dom.byId('map2');
            var  offsetX=e.x;
            var  offsetY=e.y;
            domStyle.set(map1toplayerdiv,'-webkit-clip-path','circle(100px at '+offsetX+'px '+offsetY+'px');
            domStyle.set(imageLoc,"left", (offsetX-125)+'px ');
            domStyle.set(imageLoc, "top", (offsetY-125)+'px ');
        });

            watchUtils.when(view2, "scale", function () {
                view1.scale=view2.scale;
            });
            watchUtils.when(view2, "center", function () {
                view1.center= view2.center;
            });
    })
</script>
</html>